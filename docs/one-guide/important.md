# 重要主题

## Amdahl 定律

**当我们对系统的某个部分加速时，其对整体性能的影响，取决于该部分的重要性和加速程度**。假设系统执行某应用程序所需时间为 $T_{\text { old }}$，系统某部分所需执行时间与该时间的比例为 $\alpha$，而该部分性能提升比例为 $k$。即该部分初始所需要的时间为 ${a}{T_{\text { old }}}$，现在所需时间为$\left(\alpha T_{\text { old }}\right) / k$。因此，总的执行时间为：
$$
T_{\mathrm{new}}=(1-\alpha) T_{\mathrm{old}}+\left(\alpha T_{\mathrm{old}}\right) / k=T_{\mathrm{old}}[(1-\alpha)+\alpha / k]
$$
由此，可以计算出加速比 $S=T_{\text { old }} / T_{\text { new }}$ 为：
$$
S=\frac{1}{(1-\alpha)+\alpha / k}
$$
Amdahl 定律的主要观点就是，**要想显著加速整个系统，必须提升全系统中相当大的部分的速度**。
****
> 练习题 1.1

- **A** :

$$
\alpha=\frac{1500}{2500}=0.6
$$
$$
\mathrm{k}=\frac{150}{100}=1.5
$$
$$
\mathrm{S}=\frac{1}{(1-\alpha)+\alpha / k}=\frac{1}{(1-0.6)+0.6 / 1.5}=1.25
$$
所以加速比为 1.25。  

- **B** :  

$\alpha$ 保持不变，$S=1.67$，反求性能提升比例 $k$：
$$
\mathrm{k}=\frac{\alpha}{\frac{1}{S}-(1-\alpha)}
$$
求得 $\mathrm{k} \approx 3$，即速度需要达到 300 $km/h$。
> 练习题 1.2  

$\alpha=0.8$，$S=2$，反求性能提升比例 $k=2.67$
****

## 并发和并行

计算机发展过程中，有两个需求是进步的动力：

- 我们想要计算机做的更多（**并发**）。

- 我们想要计算机运行的更快（**并行**）。

### 线程级并发

线程允许一个 CPU 同时执行多个控制流。现代计算机一般采用多核 CPU：
![多核](https://ws1.sinaimg.cn/large/e1b0b6d4ly1g2n0ul6xr2j20ke0irnd3.jpg)

### 指令级并行

现代处理器可以同时执行多条指令，加快执行速度。

### 单指令、多数据并行

即允许一条指令产生多个可以并行执行操作，称为 SIMD 并行。这可以提高处理影像、声音和视频数据应用的执行速度。